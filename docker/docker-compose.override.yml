services:
  bytebot-omniparser:
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: 1
              capabilities: [gpu]
    environment:
      - OMNIPARSER_DEVICE=cuda
      # Force PyTorch to use Float32 to prevent the P100 "Half/Float" crash
      - OMNIPARSER_PRECISION=fp32
      - TORCH_DEFAULT_DTYPE=float32
